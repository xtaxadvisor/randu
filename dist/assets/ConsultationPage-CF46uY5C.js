import{j as e,B as s,a as t,u as a,L as l,b as n,S as i,I as c}from"./index-D3F6h_Dx.js";import{u as r,d as o,L as d,R as x,h as m,r as u,e as h,f as j}from"./vendor-react-CtOH9B0J.js";import{y as g,h as f,d as v,V as p,M as y,H as N,i as b,I as w,J as C,K as k,N as T,O as D,v as S}from"./vendor-ui-BUyqawzT.js";import{f as I,a as M}from"./date-11W_9Gi9.js";import"./vendor-query-BtzKWVaK.js";function V({children:t}){const a=r(),l=o(),n=[{title:"My Consultations",href:"/consultation",icon:f},{title:"Schedule",href:"/consultation/book",icon:v},{title:"Video Sessions",href:"/consultation/sessions",icon:p},{title:"Messages",href:"/consultation/messages",icon:y},{title:"Settings",href:"/consultation/settings",icon:N}];return e.jsxs("div",{className:"min-h-screen bg-gray-100",children:[e.jsx("nav",{className:"bg-white border-b border-gray-200 fixed w-full z-30",children:e.jsx("div",{className:"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8",children:e.jsx("div",{className:"flex justify-between h-16",children:e.jsxs("div",{className:"flex items-center",children:[e.jsx(s,{variant:"ghost",onClick:()=>a("/"),icon:g,className:"mr-4",children:"Back to Home"}),e.jsx("span",{className:"text-xl font-bold text-blue-600",children:"Consultation Portal"})]})})})}),e.jsxs("div",{className:"flex pt-16",children:[e.jsx("aside",{className:"w-64 bg-white h-[calc(100vh-4rem)] border-r border-gray-200 fixed",children:e.jsx("nav",{className:"mt-5 px-2",children:n.map((s=>{const t=l.pathname===s.href;return e.jsxs(d,{to:s.href,className:"group flex items-center px-2 py-2 text-base font-medium rounded-md mb-1\n                    "+(t?"bg-blue-50 text-blue-600":"text-gray-600 hover:bg-gray-50 hover:text-gray-900"),children:[e.jsx(s.icon,{className:"mr-4 h-6 w-6 "+(t?"text-blue-600":"text-gray-400")}),s.title]},s.title)}))})}),e.jsx("main",{className:"flex-1 ml-64 p-8",children:t})]})]})}function L({consultation:t,onCancel:a,onReschedule:l}){const n=r(),i=new Date(t.startTime)>new Date,c="scheduled"===t.status&&Math.abs(new Date(t.startTime).getTime()-(new Date).getTime())<=3e5;return e.jsx("div",{className:"bg-white rounded-lg shadow overflow-hidden",children:e.jsxs("div",{className:"p-6",children:[e.jsx("div",{className:"flex justify-between items-start",children:e.jsxs("div",{children:[e.jsx("h3",{className:"text-lg font-medium text-gray-900",children:t.type.replace(/-/g," ").replace(/\b\w/g,(e=>e.toUpperCase()))}),e.jsx("span",{className:`inline-flex items-center px-2.5 py-0.5 rounded-full text-xs font-medium mt-1 ${(e=>{switch(e){case"scheduled":return"bg-green-100 text-green-800";case"in-progress":return"bg-blue-100 text-blue-800";case"completed":default:return"bg-gray-100 text-gray-800";case"cancelled":return"bg-red-100 text-red-800"}})(t.status)}`,children:t.status.replace(/-/g," ").replace(/\b\w/g,(e=>e.toUpperCase()))})]})}),e.jsxs("div",{className:"mt-4 space-y-3",children:[e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(f,{className:"h-4 w-4 mr-1"}),I(t.startTime)]}),e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(v,{className:"h-4 w-4 mr-1"}),M(t.startTime)," - ",M(t.endTime)]}),t.isVirtual&&e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(p,{className:"h-4 w-4 mr-1"}),"Virtual Meeting"]}),t.location&&e.jsxs("div",{className:"flex items-center text-sm text-gray-500",children:[e.jsx(b,{className:"h-4 w-4 mr-1"}),t.location]})]}),i&&"cancelled"!==t.status&&e.jsxs("div",{className:"mt-6 flex justify-end space-x-3",children:[c&&t.meetingLink&&e.jsx(s,{variant:"primary",onClick:()=>{n(`/consultation/${t.id}`)},icon:p,children:"Join Meeting"}),e.jsx(s,{variant:"outline",size:"sm",onClick:l,children:"Reschedule"}),e.jsx(s,{variant:"outline",size:"sm",className:"text-red-600 hover:text-red-700",onClick:a,children:"Cancel"})]})]})})}function R(){const[i,c]=x.useState(!1),{consultation:r,isLoading:o,cancelConsultation:d}=t(),{addNotification:m}=a();if(o)return e.jsx(l,{});const u=Array.isArray(r)?r:[];return e.jsxs("div",{className:"space-y-6",children:[e.jsxs("div",{className:"flex justify-between items-center",children:[e.jsx("h1",{className:"text-2xl font-bold text-gray-900",children:"Virtual Consultations"}),e.jsx(s,{variant:"primary",icon:w,onClick:()=>c(!0),children:"Schedule Consultation"})]}),0===u.length?e.jsxs("div",{className:"text-center py-12 bg-white rounded-lg shadow",children:[e.jsx(p,{className:"mx-auto h-12 w-12 text-gray-400"}),e.jsx("h3",{className:"mt-2 text-sm font-medium text-gray-900",children:"No consultations"}),e.jsx("p",{className:"mt-1 text-sm text-gray-500",children:"Get started by scheduling your first consultation"}),e.jsx("div",{className:"mt-6",children:e.jsx(s,{variant:"primary",icon:w,onClick:()=>c(!0),children:"Schedule Consultation"})})]}):e.jsxs("div",{className:"space-y-8",children:[e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Upcoming Consultations"}),e.jsx("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:u.filter((e=>new Date(e.startTime)>new Date&&"cancelled"!==e.status)).map((s=>e.jsx(L,{consultation:s,onCancel:()=>(async e=>{try{await d(e),m("Consultation cancelled successfully","success")}catch(s){m("Failed to cancel consultation","error")}})(s.id),onReschedule:()=>(async e=>{try{m("Rescheduling feature coming soon","info")}catch(s){m("Failed to reschedule consultation","error")}})(s.id)},s.id)))})]}),e.jsxs("div",{children:[e.jsx("h2",{className:"text-lg font-medium text-gray-900 mb-4",children:"Past Consultations"}),e.jsx("div",{className:"grid grid-cols-1 gap-6 lg:grid-cols-2",children:u.filter((e=>new Date(e.startTime)<=new Date||"cancelled"===e.status)).map((s=>e.jsx(L,{consultation:s},s.id)))})]})]}),e.jsx(n,{isOpen:i,onClose:()=>c(!1),serviceType:"virtual-consulting"})]})}function z(){const{consultationId:a}=m(),{consultation:n,isLoading:i}=t(a);return i?e.jsx(l,{}):n?e.jsx("div",{className:"space-y-6",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-4",children:"Consultation Details"}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsxs("div",{className:"space-y-4",children:[e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(f,{className:"h-5 w-5 mr-2"}),e.jsxs("span",{children:["Date: ",new Date(n.startTime).toLocaleDateString()]})]}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(v,{className:"h-5 w-5 mr-2"}),e.jsxs("span",{children:["Time: ",new Date(n.startTime).toLocaleTimeString()]})]}),e.jsxs("div",{className:"flex items-center text-gray-600",children:[e.jsx(p,{className:"h-5 w-5 mr-2"}),e.jsxs("span",{children:["Type: ",n.type]})]})]}),e.jsxs("div",{className:"space-y-4",children:[e.jsx(s,{variant:"primary",icon:p,className:"w-full",disabled:"scheduled"!==n.status,children:"Join Video Call"}),e.jsx(s,{variant:"outline",icon:y,className:"w-full",children:"Send Message"}),e.jsx(s,{variant:"outline",icon:C,className:"w-full",children:"View Documents"})]})]})]})}):e.jsx("div",{children:"Consultation not found"})}function A(){const a=r(),{scheduleConsultation:l,isScheduling:n}=t();return e.jsx("div",{className:"max-w-2xl mx-auto",children:e.jsxs("div",{className:"bg-white rounded-lg shadow-lg p-6",children:[e.jsx("h2",{className:"text-2xl font-bold text-gray-900 mb-6",children:"Book a Consultation"}),e.jsxs("form",{onSubmit:async e=>{e.preventDefault()},className:"space-y-6",children:[e.jsx(i,{label:"Consultation Type",options:[{value:"tax-planning",label:"Tax Planning"},{value:"financial-review",label:"Financial Review"},{value:"investment-advisory",label:"Investment Advisory"}],required:!0}),e.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[e.jsx(c,{type:"date",label:"Date",icon:f,required:!0}),e.jsx(c,{type:"time",label:"Time",icon:v,required:!0})]}),e.jsx(c,{label:"Additional Notes",multiline:!0,rows:4,placeholder:"Any specific topics you'd like to discuss?"}),e.jsxs("div",{className:"flex justify-end space-x-3",children:[e.jsx(s,{type:"button",variant:"outline",onClick:()=>a("/consultation"),children:"Cancel"}),e.jsx(s,{type:"submit",variant:"primary",icon:p,disabled:n,children:"Schedule Consultation"})]})]})]})})}function E({meetingId:t,onEnd:a}){const l=u.useRef(null),[n,i]=x.useState(!1),[c,r]=x.useState(!0);u.useEffect((()=>(async function(){try{const e=await navigator.mediaDevices.getUserMedia({video:!0,audio:!0});l.current&&(l.current.srcObject=e)}catch(e){console.error("Error accessing media devices:",e)}}(),()=>{var e;const s=null==(e=l.current)?void 0:e.srcObject;null==s||s.getTracks().forEach((e=>e.stop()))})),[]);return e.jsxs("div",{className:"flex flex-col h-screen bg-gray-900",children:[e.jsxs("div",{className:"flex-1 relative",children:[e.jsx("video",{ref:l,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"}),e.jsx("div",{className:"absolute bottom-4 right-4 w-48 h-36 bg-black rounded-lg overflow-hidden",children:e.jsx("video",{ref:l,autoPlay:!0,playsInline:!0,muted:!0,className:"w-full h-full object-cover"})})]}),e.jsx("div",{className:"bg-gray-800 p-4",children:e.jsxs("div",{className:"flex justify-center space-x-4",children:[e.jsx(s,{variant:"outline",size:"lg",className:"rounded-full "+(n?"bg-red-600 text-white":""),onClick:()=>{var e;const s=null==(e=l.current)?void 0:e.srcObject;null==s||s.getAudioTracks().forEach((e=>{e.enabled=!e.enabled})),i(!n)},icon:n?k:T}),e.jsx(s,{variant:"outline",size:"lg",className:"rounded-full "+(c?"":"bg-red-600 text-white"),onClick:()=>{var e;const s=null==(e=l.current)?void 0:e.srcObject;null==s||s.getVideoTracks().forEach((e=>{e.enabled=!e.enabled})),r(!c)},icon:c?p:D}),e.jsx(s,{variant:"outline",size:"lg",className:"rounded-full bg-red-600 text-white hover:bg-red-700",onClick:a,icon:S})]})})]})}function O(){return e.jsx(V,{children:e.jsxs(h,{children:[e.jsx(j,{path:"/",element:e.jsx(R,{})}),e.jsx(j,{path:"/book",element:e.jsx(A,{})}),e.jsx(j,{path:"/:consultationId",element:e.jsx(z,{})}),e.jsx(j,{path:"/meeting/:meetingId",element:e.jsx(E,{})})]})})}export{O as default};
